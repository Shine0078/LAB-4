{"version":3,"sources":["Animal.js"],"names":["mongoose","require","connectWithRetry","connect","process","env","MONGO_DB_URL","useNewUrlParser","useUnifiedTopology","Number","MAX_VALUE","autoReconnect","reconnectTries","reconnectInterval","err","console","error","connection","on","disconnect","log","AnimalSchema","Schema","String","index","zoo","type","required","dateOfBirth","Date","scientificName","Boolean","timestamps","Animal","model","givenName"],"mappings":"aASA,IAAAA,SAAAC,QAAA,YAYC,SAHDC,mBAMIF,SAASG,QAAQC,QAAQC,IAAIC,aAAc,CAD/CC,iBAAA,EACIP,oBAAyBK,EACrBE,eAAiB,EACjBC,eAAoBC,OAFmBC,UAGvCC,kBAHuC,MAIvCC,KAAAA,WACAC,QAAAA,IAAAA,0BALJ,MAMQ,SAAAC,GACJC,QAAYC,MAAA,oCAAZF,KArBRb,QAAMD,UAAWC,SAIjBD,SAASiB,WAAWC,GAAG,QAAS,SAAAJ,GAC5BC,QAAQC,MAAM,4BAA6BF,GAD/Cd,SAASiB,eAELjB,SAAAA,WAASmB,GAAT,eAAA,WAFJJ,QAAAK,IAAA,oDAIApB,qBAoBAE,mBAGA,IAAMmB,aAAe,IAAIrB,SAASsB,OAAO,CAAnCD,IAAAA,CAAAA,KAAYE,OAAOvB,UAASsB,EAAOE,OAAA,GACrCC,eAAK,CAAAC,KAAAH,OAAAI,UAAA,EAAAH,OAAA,GAAEE,WAAF,CAAAA,KAAAH,OAAAI,UAAA,GAAgBA,UAAU,CAAAD,KAA1BH,OAAAI,UAAA,GAAgCH,OAAO,CAAAE,KAAAH,OAAAI,UAAA,GADPC,YAAA,CAAAF,KAAAG,KAAAF,UAAA,GAErCG,IAAAA,CAAAA,KAAcrB,OAAEkB,UAAA,GAAED,gBAAF,CAAAA,KAAAK,QAAAJ,UAAA,IAAgBA,CAAgBH,WAAO,UAFlBQ,YAAA,IAAAC,OAAAjC,SAAAkC,MAAA,SAAAb,cAIrCc,OAAAA,QAAWF","file":"Animal.min.js","sourcesContent":["\r\n//GROUP 4\r\n// Name:       Samuel Abraham & Sandeep Kumar\r\n// Student id: 100870571      & 100844683\r\n// Web Development -CSS\r\n// Durham college\r\n// 19/04/2024\r\n// LAB4\r\n// INFT2202\r\n// Student Final assignment\r\nconst mongoose = require('mongoose');\r\nrequire('dotenv').config();\r\n\r\n// Improved connection setup with auto-reconnect\r\nmongoose.connection.on('error', err => {\r\n    console.error('MongoDB connection error:', err);\r\n    mongoose.disconnect();\r\n});\r\nmongoose.connection.on('disconnected', () => {\r\n    console.log('MongoDB disconnected; attempting to reconnect...');\r\n    connectWithRetry();\r\n});\r\n\r\nfunction connectWithRetry() {\r\n    mongoose.connect(process.env.MONGO_DB_URL, {\r\n        useNewUrlParser: true,\r\n        useUnifiedTopology: true,\r\n        autoReconnect: true,\r\n        reconnectTries: Number.MAX_VALUE,\r\n        reconnectInterval: 1000\r\n    }).then(() => {\r\n        console.log('MongoDB is connected');\r\n    }).catch(err => {\r\n        console.error('MongoDB initial connection error:', err);\r\n    });\r\n}\r\n\r\n// Invoke initial connection\r\nconnectWithRetry();\r\n\r\n// Define an enhanced schema with indexes for faster query performance\r\nconst AnimalSchema = new mongoose.Schema({\r\n    zoo: { type: String, required: true, index: true },\r\n    scientificName: { type: String, required: true, index: true },\r\n    commonName: { type: String, required: true },\r\n    givenName: { type: String, required: true },\r\n    gender: { type: String, required: true },\r\n    dateOfBirth: { type: Date, required: true },\r\n    age: { type: Number, required: true },\r\n    isTransportable: { type: Boolean, required: true }\r\n}, {\r\n    collection: 'animals',\r\n    timestamps: true // Automatically adds createdAt and updatedAt timestamps\r\n});\r\n\r\n// Create model and export\r\nconst Animal = mongoose.model('Animal', AnimalSchema);\r\nmodule.exports = Animal;\r\n"]}